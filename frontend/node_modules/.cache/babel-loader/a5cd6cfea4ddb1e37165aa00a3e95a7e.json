{"ast":null,"code":"var _jsxFileName = \"/Users/wakasabbasid/Desktop/IMDB/frontend/src/pages/movieUpdatePage.js\";\nimport React from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport fields from \"../components/fields.json\";\nimport Page from \"./page\";\nimport Loading from \"../components/loading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BASE_URL = \"http://localhost:4000/api/movies/\";\n\nclass MovieUpdatePage extends Page {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      movie: {},\n      loading: true\n    };\n\n    this.formatField = function (movie, _ref) {\n      let {\n        name,\n        prompt\n      } = _ref;\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-3 align-middle\",\n            children: /*#__PURE__*/_jsxDEV(\"b\", {\n              children: prompt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 37,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              placeholder: name,\n              value: movie[name],\n              onChange: event => {\n                let newMovie = { ...movie\n                };\n                newMovie[name] = event.target.value;\n                this.setState({\n                  movie: {\n                    data: newMovie\n                  }\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 40,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 17\n        }, this)\n      }, prompt + movie.uri, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 13\n      }, this);\n    };\n\n    this.formatBody = data => {\n      return JSON.stringify({\n        title: data.title,\n        rating: data.rating ? data.rating : undefined,\n        year: data.year ? data.year : undefined,\n        user_rating: data.users_rating ? data.users_rating : undefined,\n        votes: data.votes ? data.votes : undefined,\n        metascore: data.metascore ? data.metascore : undefined,\n        img_url: data.img_url ? data.img_url : undefined,\n        countries: data.countries.length !== 0 ? data.countries : undefined,\n        languages: data.languages.length !== 0 ? data.languages : undefined,\n        actors: data.actors.length !== 0 ? data.actors : undefined,\n        genre: data.genre.length !== 0 ? data.genre : undefined,\n        tagline: data.tagline ? data.tagline : undefined,\n        description: data.description ? data.description : undefined,\n        directors: data.directors.length !== 0 ? data.directors : undefined,\n        runtime: data.runtime ? data.runtime : undefined,\n        imdb_url: data.imdb_url ? data.imdb_url : undefined\n      });\n    };\n\n    this.handleUpdate = () => {\n      console.log(this.formatBody(this.state.movie.data));\n      fetch(BASE_URL + this.props.match.params.id, {\n        method: 'PUT',\n        body: this.formatBody(this.state.movie.data),\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\",\n          'Accept': 'application/json'\n        }\n      }).then(res => res.json()).then(res => {\n        console.log(res);\n        this.props.history.push(\"/movie-details/\" + this.props.match.params.id);\n      });\n    };\n\n    this.handleDelete = () => {\n      fetch(BASE_URL + this.props.match.params.id, {\n        headers: {\n          'Accept': 'application/json'\n        },\n        method: 'DELETE'\n      }).then(res => res.json()).then(res => {\n        console.log(res);\n        this.props.history.push(\"/\");\n      });\n    };\n  }\n\n  componentDidMount() {\n    fetch(BASE_URL + this.props.match.params.id, {\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\",\n        'Accept': 'application/json'\n      }\n    }).then(async result => {\n      this.setState({\n        loading: false,\n        movie: await result.json()\n      });\n    });\n  }\n\n  renderTitle() {\n    return /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-center\",\n      children: \" Update Movie \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 16\n    }, this);\n  }\n\n  getLinks() {\n    return {\n      back: /*#__PURE__*/_jsxDEV(Link, {\n        className: \"text-secondary\",\n        to: \"/movie-details/\" + this.props.match.params.id,\n        children: \"< Back to movie details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 23\n      }, this)\n    };\n  }\n\n  renderContent() {\n    if (this.state.loading) return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 41\n    }, this);\n    const movie = this.state.movie.data;\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-group\",\n        children: fields.map(field => this.formatField(movie, field))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mt-4 \",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col ml-5 mr-5 mb-2\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger btn-block\",\n            type: \"button\",\n            onClick: this.handleDelete,\n            children: \"Delete Movie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col ml-5 mr-5 mb-2\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-warning btn-block text-white\",\n            type: \"button\",\n            onClick: this.handleUpdate,\n            children: \"Update Movie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(MovieUpdatePage);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"names":["React","Form","Link","withRouter","fields","Page","Loading","BASE_URL","MovieUpdatePage","state","movie","loading","formatField","name","prompt","event","newMovie","target","value","setState","data","uri","formatBody","JSON","stringify","title","rating","undefined","year","user_rating","users_rating","votes","metascore","img_url","countries","length","languages","actors","genre","tagline","description","directors","runtime","imdb_url","handleUpdate","console","log","fetch","props","match","params","id","method","body","headers","then","res","json","history","push","handleDelete","componentDidMount","result","renderTitle","getLinks","back","renderContent","map","field"],"sources":["/Users/wakasabbasid/Desktop/IMDB/frontend/src/pages/movieUpdatePage.js"],"sourcesContent":["import React from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport {Link, withRouter} from \"react-router-dom\";\nimport fields from \"../components/fields.json\";\nimport Page from \"./page\";\nimport Loading from \"../components/loading\";\n\nconst BASE_URL = \"http://localhost:4000/api/movies/\";\n\nclass MovieUpdatePage extends Page {\n    state = {\n        movie: {},\n        loading: true,\n    };\n\n    componentDidMount() {\n        fetch(BASE_URL + this.props.match.params.id, {\n            headers: {\n                \"Content-type\": \"application/json; charset=UTF-8\",\n                'Accept': 'application/json',\n            }\n        }).then(\n            async (result) => {\n                this.setState({\n                    loading: false,\n                    movie: await result.json()\n                });\n            },\n        );\n    }\n\n    formatField = function (movie, {name, prompt}) {\n        return (\n            <li className=\"list-group-item\" key={prompt + movie.uri}>\n                <div className=\"row\">\n                    <div className=\"col-3 align-middle\">\n                        <b>{prompt}</b>\n                    </div>\n                    <div className=\"col\">\n                        <Form.Control type=\"text\" placeholder={name} value={movie[name]}\n                                      onChange={(event => {\n                                          let newMovie = {... movie};\n                                          newMovie[name] = event.target.value;\n                                          this.setState({movie: {data: newMovie}});\n                                      })}\n                        />\n                    </div>\n                </div>\n            </li>\n        );\n    }\n\n    renderTitle() {\n        return <h3 className=\"text-center\"> Update Movie </h3>;\n    }\n\n    getLinks() {\n        return {back: <Link className=\"text-secondary\" to={\"/movie-details/\" + this.props.match.params.id}>{\"< Back to movie details\"}</Link>};\n    }\n\n    formatBody = (data) => {\n        return JSON.stringify({\n            title: data.title,\n            rating: (data.rating) ? data.rating : undefined,\n            year: (data.year) ? data.year : undefined,\n            user_rating: (data.users_rating) ? data.users_rating : undefined,\n            votes: (data.votes) ? data.votes : undefined,\n            metascore: (data.metascore) ? data.metascore : undefined,\n            img_url: (data.img_url) ? data.img_url : undefined,\n            countries: (data.countries.length !== 0) ? data.countries : undefined,\n            languages: (data.languages.length !== 0) ? data.languages : undefined,\n            actors: (data.actors.length !== 0) ? data.actors : undefined,\n            genre: (data.genre.length !== 0) ? data.genre : undefined,\n            tagline: (data.tagline) ? data.tagline : undefined,\n            description: (data.description) ? data.description : undefined,\n            directors: (data.directors.length !== 0) ? data.directors : undefined,\n            runtime: (data.runtime) ? data.runtime : undefined,\n            imdb_url: (data.imdb_url) ? data.imdb_url : undefined,\n        });\n    }\n\n    handleUpdate = () => {\n        console.log(this.formatBody(this.state.movie.data));\n        fetch(BASE_URL + this.props.match.params.id, {\n            method: 'PUT',\n            body: this.formatBody(this.state.movie.data),\n            headers: {\n                \"Content-type\": \"application/json; charset=UTF-8\",\n                'Accept': 'application/json',\n            }\n        }).then(res => res.json()).then(\n            res => {\n                console.log(res);\n                this.props.history.push(\"/movie-details/\" + this.props.match.params.id);\n            }\n        );\n    }\n\n    handleDelete = () => {\n        fetch(BASE_URL + this.props.match.params.id, {\n            headers: {'Accept': 'application/json'},\n            method: 'DELETE'\n        }).then(res => res.json()).then(\n            res => {\n                console.log(res);\n                this.props.history.push(\"/\");\n            }\n        );\n    }\n\n    renderContent() {\n        if (this.state.loading) return (<Loading />);\n        const movie = this.state.movie.data;\n        return (\n            <React.Fragment>\n                <ul className=\"list-group\">\n                    {fields.map((field) => this.formatField(movie, field))}\n                </ul>\n                <div className=\"row mt-4 \">\n                    <div className=\"col ml-5 mr-5 mb-2\">\n                        <button className=\"btn btn-danger btn-block\" type=\"button\" onClick={this.handleDelete}>Delete Movie</button>\n                    </div>\n                    <div className=\"col ml-5 mr-5 mb-2\">\n                        <button className=\"btn btn-warning btn-block text-white\" type=\"button\" onClick={this.handleUpdate}>Update Movie</button>\n                    </div>\n                </div>\n            </React.Fragment>\n        );\n    }\n\n}\n\nexport default withRouter(MovieUpdatePage);"],"mappings":"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"},"metadata":{},"sourceType":"module"}